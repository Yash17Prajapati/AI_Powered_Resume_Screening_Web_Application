<!DOCTYPE html>
{% load static %}
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Past Job Posted</title>
    <link rel="stylesheet" href="{% static 'css/styles.css' %}">
    <link rel="stylesheet" href="{% static 'css/past-jobs.css' %}">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
</head>
<style>
    .job-container {
        width: 90%; /* Increased width */
        max-width: 1200px; /* Allow more width */
        margin: 50px auto;
        padding: 20px;
    }
    .pagination {
        display: flex;
        justify-content: center;
        align-items: center;
        margin-top: 20px;
        gap: 8px;
    }
    
    .pagination a {
        display: inline-block;
        padding: 8px 14px;
        font-size: 16px;
        text-decoration: none;
        color: #007bff;
        border: 1px solid #007bff;
        border-radius: 5px;
        transition: all 0.3s ease;
    }
    
    .pagination a:hover {
        background-color: #007bff;
        color: white;
    }
    
    .pagination a.active {
        background-color: #007bff;
        color: white;
        border: 1px solid #0056b3;
        font-weight: bold;
    }
    
    .pagination a:first-child, 
    .pagination a:last-child {
        font-weight: bold;
    }
</style>
<body>
    <nav class="navbar">
        <h1><a href="{% url 'recruiter:recruiter_dashboard' %}" style="text-decoration: none; color:white">Recruiter Dashboard</a></h1>
        <ul>
            <li><a href="{% url 'recruiter:job_posted' %}">Job Posted</a></li>
            <li><a href="{% url 'recruiter:post_job' %}">Post new jobs</a></li>
            <li><a href="{% url 'recruiter:result_jobs' %}">Results</a></li>
        </ul>
    </nav>
    <div class="job-container">
        {% for job in jobs %}
        <div class="job-card">
            <h2>{{ job.Job_title }}</h2>
            <p><i class="fas fa-building"></i><strong> Company:</strong> {{ job.Company_name }}</p>
            <p><i class="fas fa-map-marker-alt"></i><strong> Location:</strong> {{ job.Job_location }}</p>
            <p><i class="fas fa-briefcase"></i><strong> Type:</strong> {{ job.Employment_type }}</p>
            <p><i class="fas fa-calendar-day"></i><strong> Posted On:</strong> {{ job.Job_post_date }}</p>
            {% comment %} <p><strong>Applications Received:</strong> {{ job }}</p> {% endcomment %}
            <div class="job-actions">
                <button class="view-btn" onclick="location.href='{% url 'recruiter:view_job' job_id=job.id %}'">View Details</button>
                <button class="edit-btn" onclick="location.href='{% url 'recruiter:edit_job_post' job_id=job.id %}'">Edit Post</button>
                <button class="delete-btn" onclick="confirmDelete('{{ job.id }}')">Delete Post</button>
            </div>
        </div>
        {% empty %}
        <p>You have not posted a job yet.</p>
        {% endfor %}
        <div class="pagination">
            {% if page > 1 %}
                <a href="?page={{ page|add:-1 }}">Previous</a>
            {% endif %}
        
            {% for i in ""|center:total_pages %}
                <a href="?page={{ forloop.counter }}" 
                   class="{% if forloop.counter == page %}active{% endif %}">
                    {{ forloop.counter }}
                </a>
            {% endfor %}
        
            {% if page < total_pages %}
                <a href="?page={{ page|add:1 }}">Next</a>
            {% endif %}
        </div>
    </div>
    <footer class="footer">
        <p>&copy; 2024 Recruiter Dashboard. All rights reserved.</p>
    </footer>
    <script>
        function confirmDelete(job_id) {
            // Show confirmation dialog
            var confirmation = confirm("Are you sure you want to delete this post permanently?");
            if (confirmation) {
                // If user clicks OK, proceed with deletion
                window.location.href = "/recruiter/delete/" + job_id + "/";  // Redirect to delete view
            }
        }
    </script>
</body>
</html>
